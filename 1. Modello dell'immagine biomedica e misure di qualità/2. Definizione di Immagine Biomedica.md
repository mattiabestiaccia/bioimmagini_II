---
tags:
  - imaging-biomedico
  - DICOM
  - immagine-digitale
  - risoluzione-spaziale
  - PACS
  - pixel-spacing
  - colormap
  - formato-immagine
aliases:
  - Definizione Immagine Biomedica
  - Immagine Digitale Biomedica
---

> [!nav]- Navigazione
> **Precedente:** [[1. Dal Post-procesing all'Analisi dell'Immagine|â† Introduzione]] | [[INDICE|ğŸ“‘ Indice]] | **Successivo:** [[3. Computer Vision e Analisi dell'Immagine Biomedica|Computer Vision â†’]]

## Definizione di Immagine Biomedica

> [!info] Concetti Base
> Questo documento introduce i concetti fondamentali delle immagini biomediche digitali.
>
> **Argomenti correlati:**
> - [[1. Dal Post-procesing all'Analisi dell'Immagine|Introduzione all'Analisi]]
> - [[4. Modello dell'Immagine Biomedica|Modello dell'Immagine]]
> - [[5. QualitÃ  dell'immagine Biomedica|QualitÃ  dell'Immagine]]

**Immagine biomedica:** rappresentazione spazio/temporale di un fenomeno fisico legato al dispositivo di acquisizione.

**Processo di acquisizione:**
- Caratteristiche fisiche di una regione di spazio (voxel) rispetto ad eccitazione (opacitÃ  raggi X, risonanza magnetica, echo US)
- Traduzione in valore numerico di segnale
- Tipicamente un singolo canale (livello di grigio)
- Livello di grigio proporzionale al fenomeno fisico misurato
- Tutte le immagini biomediche oggi sono **digitali** (matrici di numeri interi)
- Standard di codifica: **formato DICOM**

## Differenze: Immagine Biomedica vs Immagine Digitale Tradizionale

### Immagine Digitale Tradizionale
- Tipicamente a colori
- Array (3, dx, dy) â†’ tre canali RGB (Red, Green, Blue)
- Valori: 0-255 per canale
- Occupazione memoria: 3Ã—dxÃ—dy byte + header

### Immagine Biomedica
- Livelli di grigio a **singolo canale**
- Caratterizzata dall'istogramma
- **ProfonditÃ  bit:**
  - 12 bit: $2^{12} = 4096$ livelli
  - 16 bit: $2^{16} = 65536$ livelli
  - Valori negativi: range $(-2^{B/2-1}, 2^{B/2})$
- Esempio MRI: 0 (aria, nessun segnale) â†’ valori alti (grasso)

### Visualizzazione a Colori con Color Map

**Color map:** trasformazione che associa ad ogni livello di grigio una terna RGB

**Vantaggi:**
- Miglior riconoscimento visivo (sistema occhio-cervello piÃ¹ efficiente con i colori)
- Utilizzata in medicina nucleare (SPECT, PET)

**Attenzione:**
- L'immagine a colori **non ha valore diagnostico** senza la color map associata
- Necessario specificare sempre quale color map viene utilizzata

## Regole per la Rappresentazione delle Immagini Biomediche

1. **Immagini tipicamente visualizzate a livelli di grigio** (US, MRI, CT)
   - Significato del grigio dipende dalla fisica di acquisizione
   - Non usare color map arbitrarie

2. **In alcuni casi si usano color map standard** (SPECT, PET)
   - Color map deve sempre essere associata all'immagine
   - Immagine a colori = rappresentazione dell'originale a livelli di grigio

3. **Seguire le convenzioni del settore**
   - Il "modo giusto" dipende dalle convenzioni tra utilizzatori
   - Rappresentazioni non standard rendono l'immagine inutile
   - **Importante:** non inventare rappresentazioni personali

## Standard DICOM

### Caratteristiche
- **Unico formato con valore diagnostico e legale**
- Rappresentazioni alternative (TIF, JPEG) alterano il contenuto diagnostico
- Non utilizzare formati diversi per distribuzione/archiviazione

### Struttura File DICOM
- **Header:** informazioni sull'immagine
- **Immagine:** codificata come interi a 16 bit (con o senza segno)
- PuÃ² contenere singola immagine o serie di immagini

### Formato Header DICOM

| Campo | Descrizione | Tipo | Lunghezza | Valore |
|-------|-------------|------|-----------|---------|
| TAG | Codice (gruppo, elemento) | Hex | - | 0008,0022 |
| Description | Descrizione elemento | - | - | Acquisition Date |
| Type | Formato | - | - | DA |
| Length | Lunghezza | - | - | 10 |
| Value | Valore effettivo | - | - | 20120211 |

**In MATLAB:** `dicominfo()` restituisce struttura con description come nome campo e Value come valore

## Parametri Fondamentali dell'Immagine Biomedica 2D

### Funzione Immagine
Immagine bidimensionale: $I(x,y)$ trasforma coordinate cartesiane in intensitÃ  di segnale

### Dominio Discreto
$$x = (0, 1, \ldots, N_x-1)$$
$$y = (0, 1, \ldots, N_y-1)$$
$$I = (0, 1, \ldots, 2^B-1)$$

Dove:
- $N_x, N_y$: numero righe e colonne (campi DICOM: `Rows`, `Columns`)
- $B$: profonditÃ  in bit (campo DICOM: `Bits Allocated`)

### Valori Negativi (es. TAC)
Range: $(-2^{B/2-1}, \ldots, 2^{B/2})$
- Campo DICOM `Pixel Representation`: 1=signed, 0=unsigned

### Sistema di Coordinate
- Origine: **alto a sinistra**
- Asse y orientato verso il **basso**

### Risoluzione Spaziale

**Numero pixel:** $N_x \times N_y$

**Pixel spacing** (risoluzione in mm/pixel):
- Campo DICOM: `Pixel Spacing`

**Relazione con Field of View (FOV):**
$$\text{FOV}_x = \text{Rows} \times dx$$
$$\text{FOV}_y = \text{Columns} \times dy$$

Dove $dx, dy$ = pixel spacing

**Note importanti:**
- Pixel tipicamente quadrati ($dx = dy$) per simmetria del dispositivo
- Ogni pixel corrisponde a un **volume** (parallelepipedo: base=pixel, altezza=thickness)
- Campo DICOM thickness: `Slice Thickness`
- Risoluzione fisica $\neq$ risoluzione potenziale del dispositivo (ottimizzazione tempo/dose/SNR)

![[Pasted image 20251129161259.png]]

## Parametri Fondamentali dell'Immagine Biomedica 3D

### Funzione Volume
Immagine tridimensionale: $I(x,y,z)$

**Salvataggio:**
- Serie di immagini 2D parallele perpendicolari all'asse z
- Distanza tra fette = risoluzione lungo z ($dz$)
- Tipicamente: $dz > dx, dy$ (risoluzione z ridotta)
- **Voxel:** parallelepipedi

![[Pasted image 20251129161356.png]]

### Risoluzione lungo z

**Distanza inter-slice:**
$$\text{Distanza} = \text{Slice Thickness} + \text{Gap}$$

Dove:
- `Gap = 0`: fette adiacenti (copertura completa)
- `Gap > 0`: porzioni non coperte
- `Gap < 0`: overlap tra slices

**Attenzione:** campo DICOM `Spacing Between Slices` usato arbitrariamente

**Metodo consigliato:** calcolare distanza euclidea tra angoli superiori sinistri di due slices consecutive usando `Image Position Patient`

## Risoluzione Temporale

**Immagini dinamiche:** fenomeni che evolvono nel tempo

**Risoluzione temporale:** distanza in unitÃ  temporali (ms o s) tra immagini successive

**Campi DICOM:**
- `Image Time`: tempo acquisizione in hh.mm.ss (inadeguato per fenomeni rapidi)
- `Trigger Time`: tempo in millisecondi dall'inizio acquisizione
  - Utilizzato con acquisizioni "triggered" (es. sincronizzazione ECG cardiaco)

## Sistema di Riferimento Spaziale

**Documentazione:** DICOM PS 3.17 - Annex A (Explanatory Information)
Disponibile su: http://www.dclunie.com/dicom-status

### Sistema di Riferimento Paziente

**Assi coordinate:**
- **Asse z:** direzione F-H (Piedi-Testa)
- **Asse y:** direzione A-P (Anteriore-Posteriore)
- **Asse x:** direzione R-L (Destra-Sinistra)

### Orientamento Paziente

**Campo DICOM:** `Patient Position`
- Esempio: `FFS` (Feet First-Supine) = paziente entra con piedi in avanti, posizione supina
- Determina relazione tra sistema paziente e sistema scanner

### Posizione e Orientamento Slice

**Campo `Image Position Patient`:**
- Coordinate (mm) dell'angolo superiore sinistro dell'immagine
- Nel sistema di riferimento paziente

**Campo `Image Orientation Patient`:**
- Orientazione versori degli assi immagine
- Esempio: `1.0\0.0\0.0\0.0\1.0\0.0` = immagine assiale

![[Pasted image 20251129161434.png]]

## Standard DICOM: Comunicazione e Archiviazione

**DICOM** = Digital Imaging and COmmunications in Medicine

### Funzioni dello Standard
- Comunicazione
- Visualizzazione
- Archiviazione
- Stampa

### Informazioni Paziente
- **Inserimento manuale:** operatore sulla console
- **Inserimento automatico:** da sistema HIS (Hospital Information System)
  - Lettura della **work list** (lista esami giornaliera)

## Sistema PACS

**PACS** = Picture Archiving and Communication System

### Componenti
1. **Archiviazione:** gestione dati e immagini
2. **Visualizzazione:** monitor ad altissima risoluzione per diagnosi
3. **Elaborazione:** (sistemi evoluti)

### FunzionalitÃ 
- **Ricerca** attraverso campi DICOM (nome paziente, data, tipo esame)
- **Memoria fisica:** array hard disk (configurazione RAID per ridondanza)
- **Archiviazione temporanea:** qualche mese
- **Backup:** DVD o supporti magneto-ottici

### Comunicazione DICOM

**Parametri identificativi macchina:**
- Indirizzo di rete
- Porta comunicazione
- **AETitle** (Application Entity Title)

**Procedura:**
- Client deve essere dichiarato sul server
- Comunicazione secondo protocollo DICOM

### Classificazione Dispositivo Medico
- **Classe I** (solo archivio): non dispositivo medico
- **Altre funzioni** (visualizzazione, elaborazione): dispositivo medico certificato

### Integrazione con Software di Analisi
- **Client DICOM:** interfaccia con PACS per scaricare immagini
- **Secondary DICOM:** risultati elaborazione salvati come file DICOM (non da dispositivo acquisizione)

---

> [!nav]- Navigazione
> **Precedente:** [[1. Dal Post-procesing all'Analisi dell'Immagine|â† Introduzione]] | [[INDICE|ğŸ“‘ Indice]] | **Successivo:** [[3. Computer Vision e Analisi dell'Immagine Biomedica|Computer Vision â†’]]
